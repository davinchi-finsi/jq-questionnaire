/**
 * @license jq-quiz v1.1.0
 * (c) 2018 Finsi, Inc.
 */

$.widget("ui.jqQuiz",{NAMESPACE:"jqQuiz",QUERY_HEADER:"[data-jq-quiz-header]",QUERY_WRAPPER:"[data-jq-quiz-wrapper]",QUERY_BODY:"[data-jq-quiz-body]",QUERY_PROPERTIES:"[data-jq-quiz-properties]",QUERY_QUESTIONS:"[data-jq-quiz-questions]",QUERY_QUESTION:"[data-jq-quiz-question]",QUERY_OPTIONS:"[data-jq-quiz-options]",QUERY_OPTION:"[data-jq-quiz-option]",QUERY_ACTION_START:"[data-jq-quiz-start]",QUERY_ACTION_NEXT:"[data-jq-quiz-next]",QUERY_ACTION_PREV:"[data-jq-quiz-prev]",QUERY_ACTION_END:"[data-jq-quiz-end]",QUERY_RENDER_OPTION:"[data-jq-quiz-property]",QUERY_RENDER_RESULT:"[data-jq-quiz-result-item]",QUERY_RESULT:"[data-jq-quiz-result]",QUERY_FEEDBACK:"[data-jq-quiz-feedback]",IS_CORRECT:"isCorrect",ATTR_CURRENT_QUESTION:"data-current-question",ATTR_IS_CORRECT:"data-is-correct",ATTR_POINTS_FOR_SUCCESS:"data-points-for-success",ATTR_FEEDBACK:"data-jq-quiz-feedback",ATTR_POINTS_FOR_FAIL:"data-points-for-fail",ON_QUESTION_HIDE:"jqQuiz:questionHide",ON_QUESTION_HIDDEN:"jqQuiz:questionHidden",ON_QUESTION_SHOW:"jqQuiz:questionShow",ON_QUESTION_SHOWN:"jqQuiz:questionShow",ON_HEADER_HIDE:"jqQuiz:headerHide",ON_HEADER_SHOW:"jqQuiz:headerShow",ON_BODY_HIDE:"jqQuiz:bodyHide",ON_BODY_HIDDEN:"jqQuiz:bodyHidden",ON_BODY_SHOW:"jqQuiz:bodyShow",ON_BODY_SHOWN:"jqQuiz:bodyShown",ON_TRANSITION_END:"jqQuiz:transitionEnd",ON_OPTION_CHANGE:"jqQuiz:questionChange",ON_START:"jqQuiz:start",ON_STARTED:"jqQuiz:started",ON_END:"jqQuiz:end",FEEDBACK_TYPES:{ok:"ok",ko:"ko"},STATES:{off:0,running:1,result:2,review:3},DISABLE_END:{never:0,beforeAnswerAll:1,beforeAnswerAllCorrect:2},options:{classes:{firstQuestion:"jq-quiz--first-question",lastQuestion:"jq-quiz--last-question",widget:"jq-quiz",questionCorrect:"jq-quiz--correct",questionIncorrect:"jq-quiz--incorrect",selected:"jq-quiz--selected",stateResult:"jq-quiz--result",stateReview:"jq-quiz--review",stateRunning:"jq-quiz--running",multichoice:"jq-quiz--multi-choice",wrapper:"jq-quiz__form",header:"jq-quiz__header",body:"jq-quiz__body",startBtn:"jq-quiz__start",nextBtn:"jq-quiz__next",prevBtn:"jq-quiz__prev",endBtn:"jq-quiz__end",result:"jq-quiz__result",question:"jq-quiz__question",option:"jq-quiz__option",navbar:"jq-quiz__navbar",button:"jq-quiz__action",properties:"jq-quiz__properties",questions:"jq-quiz__questions",disabled:"jq-quiz--disabled"},delayOnAutoNext:500,pointsForSuccess:1,pointsForFail:0,cutOffMark:50,immediateFeedback:!1,disableOptionAfterSelect:!0,allowChangeOption:!1,autoGoNext:!0,showCorrection:!0,showResult:!0,multichoice:!1,disableNextUntilSuccess:!1,disableEndActionUntil:0,dialog:{draggable:!1,autoOpen:!0,resizable:!1,modal:!0},initialQuestion:0,autoStart:!1},_create:function(){this._getElements(),this.element.uniqueId(),this._mapQuestions(),this._changeState(this.STATES.off),this._assignEvents(),this._renderOptions(),this.options.autoStart&&this.start()},_renderOptions:function(){this._renderVar(this.QUERY_RENDER_OPTION,"jqQuizProperty")},_renderVar:function(t,s,i,e){e=e||this.element,i=i||this.options;let n=e.find(t);for(let t of n){let e,n,o=$(t),a=o.data(s)||"";if(void 0!=a){[a,e]=a.split("?"),a=a.trim(),void 0!=e&&([e,n]=e.split(":"),e.trim(),n.trim());let t=i[a];t=void 0!=t?t:"",void 0!=e&&t?t=e:void 0==n||t||(t=n),o.html(t)}}},_getElements:function(){this._$wrapper=this.element.find(this.QUERY_WRAPPER).addClass(this.options.classes.wrapper),this._$header=this.element.find(this.QUERY_HEADER).addClass(this.options.classes.header),this._$body=this.element.find(this.QUERY_BODY).addClass(this.options.classes.body),this._$body.hide(),this._$properties=this.element.find(this.QUERY_PROPERTIES).addClass(this.options.classes.properties),this._$questionsWrapper=this.element.find(this.QUERY_QUESTIONS).addClass(this.options.classes.questions),this._$questions=this._$questionsWrapper.find(this.QUERY_QUESTION).addClass(this.options.classes.question),this._$questions.hide(),this._$startBtn=this._$wrapper.find(this.QUERY_ACTION_START).addClass(`${this.options.classes.button} ${this.options.classes.startBtn}`),this._$nextBtn=this._$wrapper.find(this.QUERY_ACTION_NEXT).addClass(`${this.options.classes.button} ${this.options.classes.nextBtn}`),this._$prevBtn=this._$wrapper.find(this.QUERY_ACTION_PREV).addClass(`${this.options.classes.button} ${this.options.classes.prevBtn}`),this._$endBtn=this._$wrapper.find(this.QUERY_ACTION_END).addClass(`${this.options.classes.button} ${this.options.classes.endBtn}`),this._$result=this._$wrapper.find(this.QUERY_RESULT).addClass(this.options.classes.result),this._$result.hide()},_mapQuestions:function(){let t=this._$questions.find(this.QUERY_OPTION).find(":checkbox");t.length>0?(t.attr("type","checkbox"),this.options.multichoice=!0,this.element.addClass(this.options.classes.multichoice)):t.attr("type","radio");let s=this._$questions,i=[],e={},n=0;for(let t=0,o=s.length;t<o;t++){let o=$(s[t]),a=this._mapQuestion(o);i.push(a),e[a.id]=t,n+=a.pointsForSuccess}this._questions=i,this._questionsMap=e,this._maxScore=n,this._setOption("maxScore",n)},_mapQuestion:function(t){let s,i=t.find(this.QUERY_OPTIONS),e=i.find(this.QUERY_OPTION),n=e.first().find("input").attr("name"),o=t.data(this.ATTR_POINTS_FOR_SUCCESS),a=t.data(this.ATTR_POINTS_FOR_FAIL),{arr:arr,map:map}=this._mapOptions(e),h=t.find(this.QUERY_FEEDBACK).not(this.QUERY_OPTION+" "+this.QUERY_FEEDBACK);h.hide(),t.removeAttr(this.ATTR_POINTS_FOR_FAIL),t.removeAttr(this.ATTR_POINTS_FOR_SUCCESS),t.uniqueId(),s=t.attr("id"),n=void 0!=n?n:s,e.find("input").attr("name",n);let r={id:s,$element:t,$optionsWrapper:i,$options:e,options:arr,optionsMap:map,pointsForSuccess:void 0!=o?o:this.options.pointsForSuccess,pointsForFail:void 0!=a?a:this.options.pointsForFail};for(let t of h){let s=$(t),i=s.attr(this.ATTR_FEEDBACK);switch(i){case this.FEEDBACK_TYPES.ok:r.$feedbackOk=s;break;case this.FEEDBACK_TYPES.ko:r.$feedbackKo=s;break;default:r.$feedback=s}}return r.$feedbackOk=r.$feedbackOk||r.$feedback||$(null),r.$feedbackKo=r.$feedbackKo||r.$feedback||$(null),r},_mapOptions:function(t){let s=[],i={};for(let e=0,n=t.length;e<n;e++){let n=$(t[e]),o=this._mapOption(n);s.push(o),i[o.id]=e}return{arr:s,map:i}},_mapOption:function(t){let s,i=!!t.data(this.IS_CORRECT),e=t.find(this.QUERY_FEEDBACK);t.removeAttr(this.ATTR_IS_CORRECT),t.uniqueId();let n={id:s=t.attr("id"),$element:t,isCorrect:i};for(let t of e){let s=$(t),i=s.attr(this.ATTR_FEEDBACK);switch(i){case this.FEEDBACK_TYPES.ok:n.$feedbackOk=s;break;case this.FEEDBACK_TYPES.ko:n.$feedbackKo=s;break;default:n.$feedback=s}}return n.$feedbackOk=n.$feedbackOk||n.$feedback||$(null),n.$feedbackKo=n.$feedbackKo||n.$feedback||$(null),e.hide(),n},_assignEvents:function(){this._$startBtn.off(this.NAMESPACE).on(`click.${this.NAMESPACE}`,{instance:this},this._onStartButtonClick),this._$endBtn.off(this.NAMESPACE).on(`click.${this.NAMESPACE}`,{instance:this},this._onEndButtonClick),this._$nextBtn.off(this.NAMESPACE).on(`click.${this.NAMESPACE}`,{instance:this},this._onNextButtonClick),this._$prevBtn.off(this.NAMESPACE).on(`click.${this.NAMESPACE}`,{instance:this},this._onPrevButtonClick),this._$questions.off(this.NAMESPACE).on(`change.${this.NAMESPACE}`,{instance:this},this._onOptionChange)},_onStartButtonClick:function(t){t.preventDefault(),t.data.instance.start()},_onEndButtonClick:function(t){t.preventDefault(),t.data.instance.end()},_onNextButtonClick:function(t){t.preventDefault(),t.data.instance.next()},_onPrevButtonClick:function(t){t.preventDefault(),t.data.instance.prev()},_calificate:function(){let t,s=0,i=this._maxScore,e=(this._runtime,this._questions),n=0,o=0;if(1!=this.options.multichoice){let t=this._calificateSingleChoice();n=t.nSuccess,o=t.nFails,s=t.score}else{let t=this._calificateMultiChoice();n=t.nSuccess,o=t.nFails,s=t.score}return t={maxScore:i,score:s,percentage:100*s/i,questionsSuccess:n,questionsFail:o,questionsNotAttempted:e.length-(n+o)},t.success=t.percentage>=this.options.cutOffMark,t},_calificateSingleChoice:function(){let t=0,s=this._runtime,i=this._questions,e=0,n=0;for(let o=0,a=i.length;o<a;o++){let a=i[o],h=(s[a.id],this._calificateSingleChoiceQuestion(a.id));void 0!=h&&(h?(t+=a.pointsForSuccess,e++):(n++,t>=a.pointsForFail&&(t-=a.pointsForFail)))}return{nSuccess:e,nFails:n,score:t}},_calificateSingleChoiceQuestion:function(t){let s,i=this.getQuestionById(t);if(i){let t=this._runtime[i.id];if(t&&t.options.length>0){let e=i.options,n=i.optionsMap,o=t.options[0],a=e[n[o]];s=a.isCorrect,t.isCorrect=s}}return s},_calificateMultiChoiceQuestion:function(t){let s,i=this.getQuestionById(t);if(i){let t=this._runtime[i.id];if(t){let e=i.options,n=t.options,o=0,a=0,h=0;for(let t=0,s=e.length;t<s;t++){let i=e[t],r=-1!=n.indexOf(i.id);i.isCorrect?(a++,o+=r?1:0):r&&(h++,t=s)}s=0==h&&o==a,t.isCorrect=s}}return s},_calificateMultiChoice:function(){let t=0,s=this._runtime,i=this._questions,e=0,n=0;for(let o=0,a=i.length;o<a;o++){let a=i[o],h=(s[a.id],this._calificateMultiChoiceQuestion(a.id));void 0!=h&&(h?(e++,t+=a.pointsForSuccess):(n++,t>=a.pointsForFail&&(t-=a.pointsForFail)))}return{nSuccess:e,nFails:n,score:t}},_showOptionStatus:function(t,s){let i=this.getQuestionById(t);if(i){let t=this._runtime[i.id],e=i.options[i.optionsMap[s]];if(t&&e){let i=-1!=t.options.indexOf(s);i?e.$element.addClass(e.isCorrect?this.options.classes.questionCorrect:this.options.classes.questionIncorrect):e.$element.addClass(e.isCorrect?this.options.classes.questionIncorrect:"")}else e.$element.addClass(e.isCorrect?this.options.classes.questionIncorrect:"")}},_showQuestionStatus:function(t){let s=this.getQuestionById(t);if(s){let t=this._runtime[s.id];if(t&&void 0!=t.option){let i=s.options;t.isCorrect?s.$element.addClass(this.options.classes.questionCorrect):s.$element.addClass(this.options.classes.questionIncorrect);for(let t of i)t.isCorrect?t.$element.addClass(this.options.classes.questionCorrect):t.$element.addClass(this.options.classes.questionIncorrect)}}},_showOptionFeedback:function(t,s){let i=this.getQuestionById(t);if(i){let t=this._runtime[i.id],e=i.options[i.optionsMap[s]];if(t&&e){let i=-1!=t.options.indexOf(s);i&&(e.isCorrect?(e.$feedbackKo.hide(),e.$feedbackOk.show()):(e.$feedbackOk.hide(),e.$feedbackKo.show()))}}},_showQuestionFeedback:function(t){let s=this.getQuestionById(t);if(s){let i=this._runtime[s.id];if(i&&void 0!=i){let e=this.getOptionById(t,i.options[0]);e.isCorrect?(s.$feedbackKo.hide(),s.$feedbackOk.show()):(s.$feedbackOk.hide(),s.$feedbackKo.show())}}},_disableQuestionOptionsField:function(t){let s=this.getQuestionById(t);if(s)if(this.options.multichoice&&this._state==this.STATES.running){s.$element.find(":checked").attr("disabled","disabled");for(let t of s.options)t.$element.find(":checked").length>0&&t.$element.addClass(this.options.classes.disabled)}else s.$element.addClass(this.options.classes.disabled),s.$options.addClass(this.options.classes.disabled),s.$element.find("input").attr("disabled","disabled")},_onOptionClick:function(t){let s=t.data.instance,i=$(this).attr("id"),e=s._runtime[i]||{};!0===s.options.immediateFeedback&&void 0!=e.option&&t.preventDefault()},_onOptionChange:function(t){let s=t.data.instance;if(1!=s.options.disabled&&s._state==s.STATES.running){let i=$(t.target).parents(s.QUERY_OPTION),e=$(this),n=e.attr("id"),o=s._runtime[n]||{},a=o.options||[],h=o.optionsValues||[],r=i.attr("id"),d=i.find("input").attr("value");o.options=a,o.optionsValues=h,s._runtime[n]=o,s.options.multichoice?(t.target.checked?(a.push(r),d&&h.push(d),i.addClass(s.options.classes.selected)):(s._resetOption(n,r),a.splice(a.indexOf(r),1),d&&h.splice(h.indexOf(d),1)),s._calificateMultiChoiceQuestion(n)):(o.options.length>0&&s._resetOption(n,o.options[0]),a[0]=r,d&&(h[0]=d),i.addClass(s.options.classes.selected),s._calificateSingleChoiceQuestion(n)),1!=s.options.allowChangeOption&&s._disableQuestionOptionsField(n),1==s.options.immediateFeedback&&(void 0!=s.options.allowChangeOption&&1!=s.options.allowChangeOption||1==s.options.disableOptionAfterSelect?s._disableQuestionOptionsField(n):1==s.options.disableNextUntilSuccess&&s._updateNavigationActionsStates(),s._showQuestionStatus(n),s._showOptionStatus(n,r),s._showOptionFeedback(n,r),s._showQuestionFeedback(n,r)),0!=s.options.autoGoNext&&1!=s.options.multichoice&&setTimeout(()=>{s.next()},s.options.delayOnAutoNext),s.element.triggerHandler(s.ON_OPTION_CHANGE,[s,n,r,d,o])}},_resetOption:function(t,s){let i=this.getQuestionById(t);if(i){let t=i.options[i.optionsMap[s]];t&&(t.$feedbackKo.hide(),t.$feedbackOk.hide(),t.$element.removeClass(this.options.classes.selected+" "+this.options.classes.questionCorrect+" "+this.options.classes.questionIncorrect))}},_setOption:function(t,s){this._super(t,s),"disabled"===t&&(s?this._disable():this._enable())},_hide:function(t){let s=$.Deferred(),i=this.element.triggerHandler(this.ON_QUESTION_HIDE,[this,t]);return void 0!=i&&i.hasOwnProperty("then")?i.then(()=>{this.element.triggerHandler(this.ON_QUESTION_HIDDEN,[this,t]);s.resolveWith(this)}):t.fadeOut(400,()=>{this.element.triggerHandler(this.ON_QUESTION_HIDDEN,[this,t]);s.resolveWith(this)}),s.promise()},_show:function(t){let s=$.Deferred(),i=this.element.triggerHandler(this.ON_QUESTION_SHOW,[this,t]);return void 0!=i&&i.hasOwnProperty("then")?i.then(()=>{this.element.triggerHandler(this.ON_QUESTION_SHOWN,[this,t]);s.resolveWith(this)}):t.fadeIn(400,()=>{this.element.triggerHandler(this.ON_QUESTION_SHOWN,[this,t]);s.resolveWith(this)}),s.promise()},_onHeaderHidden:function(t){t.resolveWith(this)},_hideHeader:function(){let t=$.Deferred();if(this._$header.length>0){let s=this.element.triggerHandler(this.ON_HEADER_HIDE,[this,this._$header]);void 0!=s&&s.hasOwnProperty("then")?s.then(this._onHeaderHidden.bind(this,t)):this._$header.fadeOut(400,this._onHeaderHidden.bind(this,t))}else this._onHeaderHidden(t);return t.promise()},_showHeader:function(){let t=$.Deferred();if(this._$header.length>0){let s=this.element.triggerHandler(this.ON_HEADER_SHOW,[this,this._$header]);void 0!=s&&s.hasOwnProperty("then")?s.then(()=>{t.resolveWith(this)}):this._$header.fadeIn(400,()=>{t.resolveWith(this)})}else t.resolveWith(this);return t.promise()},_onBodyHidden:function(t){t.resolveWith(this)},_hideBody:function(){let t=$.Deferred(),s=this.element.triggerHandler(this.ON_BODY_HIDE,[this,this._$body]);return void 0!=s&&s.hasOwnProperty("then")?s.then(this._onBodyHidden.bind(this,t)):this._$body.fadeOut(400,this._onBodyHidden.bind(this,t)),t.promise()},_showBody:function(){let t=$.Deferred(),s=this.element.triggerHandler(this.ON_BODY_SHOW,[this,this._$body]);return void 0!=s&&s.hasOwnProperty("then")?s.then(()=>{t.resolveWith(this)}):this._$body.fadeIn(400,()=>{t.resolveWith(this)}),t.promise()},_animationStart:function(){let t=$.Deferred(),s=this;return this._hideHeader().then(()=>{this._showBody().then(()=>{t.resolveWith(s)})}),t.promise()},_animationStop:function(){let t=$.Deferred(),s=this;return this._hideBody().then(()=>{this._showHeader().then(()=>{t.resolveWith(s)})}),t.promise()},_disableEnd:function(){this._$endBtn.prop("disabled",!0),this._$endBtn.addClass(this.options.classes.disabled)},_enableEnd:function(){this._$endBtn.prop("disabled",!1),this._$endBtn.removeClass(this.options.classes.disabled)},_disablePrev:function(){this._$prevBtn.prop("disabled",!0),this._$prevBtn.addClass(this.options.classes.disabled)},_enablePrev:function(){this._$prevBtn.prop("disabled",!1),this._$prevBtn.removeClass(this.options.classes.disabled)},_disableNext:function(){this._$nextBtn.prop("disabled",!0),this._$nextBtn.addClass(this.options.classes.disabled)},_enableNext:function(){this._$nextBtn.prop("disabled",!1),this._$nextBtn.removeClass(this.options.classes.disabled)},_disableStart:function(){this._$startBtn.prop("disabled",!0),this._$startBtn.addClass(this.options.classes.disabled)},_enableStart:function(){this._$startBtn.prop("disabled",!1),this._$startBtn.removeClass(this.options.classes.disabled)},_onAnimationStartEnd:function(){void 0!=this.options.initialQuestion&&this.goTo(this.options.initialQuestion),this.element.trigger(this.ON_STARTED,[this])},_onAnimationEndEnd:function(){this.reset()},_onQuestionTransitionEnd(t,s,i){this._updateNavigationActionsStates(),i.resolveWith(this),this.element.triggerHandler(this.ON_TRANSITION_END,[this,t,s])},_updateNavigationActionsStates:function(){let t=this.getQuestionByIndex(this._currentQuestionIndex),s=this._runtime[t.id];if(0===this._currentQuestionIndex?(this._disablePrev(),this._enableNext()):this._currentQuestionIndex===this._questions.length-1?(this._disableNext(),this._enablePrev()):(this._enablePrev(),this._enableNext()),1==this.options.immediateFeedback&&1!=this.options.disableOptionAfterSelect)switch(1!=this.options.disableNextUntilSuccess||void 0!=s&&1==s.isCorrect||this._disableNext(),this.options.disableEndActionUntil){case this.DISABLE_END.beforeAnswerAll:Object.keys(this._runtime),this._questions.length;break;case this.DISABLE_END.beforeAnswerAllCorrect:let t=0,i=this._runtime;for(let s in i){let e=i[s];e.isCorrect&&t++}t==this._questions.length?this._enableEnd():this._disableEnd()}},_onEndShowResult:function(t){t.data.instance.end()},getMaxPoints:function(){return this._maxScore},getId:function(){return this.element.attr("id")},next:function(){return void 0!=this._currentQuestionIndex?this.goTo(this._currentQuestionIndex+1):this.goTo(0)},prev:function(){return void 0!=this._currentQuestionIndex?this.goTo(this._currentQuestionIndex-1):this.goTo(0)},goTo:function(t){let s;if(this._state===this.STATES.running||this._state==this.STATES.review){let i,e=t;"string"==(typeof e).toLowerCase()&&(e=this._questions.findIndex(s=>s.id==t)),i=this._questions[e];let n=this._currentQuestionIndex,o=this._questions[n];if(void 0!=i){if(void 0==o||o!=i){let t=$.Deferred();s=t.promise(),this._disableNext(),this._disablePrev(),this._currentQuestionIndex=e,e==this._questions.length-1?(this.element.removeClass(this.options.classes.firstQuestion),this.element.addClass(this.options.classes.lastQuestion)):0==e?(this.element.removeClass(this.options.classes.lastQuestion),this.element.addClass(this.options.classes.firstQuestion)):(this.element.removeClass(this.options.classes.firstQuestion),this.element.removeClass(this.options.classes.lastQuestion)),this.element.attr(this.ATTR_CURRENT_QUESTION,e),o?this._hide(o.$element).then(()=>{this._show(i.$element).then(this._onQuestionTransitionEnd.bind(this,o,i,t))}):this._show(i.$element).then(this._onQuestionTransitionEnd.bind(this,o,i,t))}}else if(o){let t=$.Deferred();s=t.promise(),this._hide(o.$element).then(this._onQuestionTransitionEnd.bind(this,o,null,t))}}return s},getQuestions:function(){return this._questions},getQuestionByIndex:function(t){return this._questions[t]},getQuestionById:function(t){return this.getQuestionByIndex(this._questionsMap[t])},getOptions:function(t){return(this.getQuestionById(t)||{}).options},getOptionByIndex:function(t,s){let i,e=this.getOptions(t);return e&&(i=e[s]),i},getOptionById:function(t,s){let i,e=this.getQuestionById(t);return e&&(i=e.options[e.optionsMap[s]]),i},update:function(){},redrawProperties:function(){this._renderOptions()},reset:function(){this._runtime={},this.element.removeAttr(this.ATTR_CURRENT_QUESTION),this.element.removeClass(this.options.classes.firstQuestion),this.element.removeClass(this.options.classes.lastQuestion),this._currentQuestionIndex=null,this._$questions.hide(),this._$questions.first().show(),this._$questions.find("input").prop("checked",!1).removeAttr("disabled"),this._$questions.find("."+this.options.classes.disabled).removeClass(this.options.classes.disabled),this.element.find(this.QUERY_FEEDBACK).hide(),this.element.find("."+this.options.classes.questionCorrect).removeClass(this.options.classes.questionCorrect),this.element.find("."+this.options.classes.questionIncorrect).removeClass(this.options.classes.questionIncorrect),this.element.find("."+this.options.classes.selected).removeClass(this.options.classes.selected)},start:function(){1!=this.options.disabled&&this._state===this.STATES.off&&(this._changeState(this.STATES.running),this.element.trigger(this.ON_START,[this]),this._runtime={},this._animationStart().then(this._onAnimationStartEnd))},showResult:function(t){return!!(t&&this.options.showResult&&this._$result.length>0)&&(this._changeState(this.STATES.result),this._renderVar(this.QUERY_RENDER_RESULT,"jqQuizResultItem",t,this._$result),this._$result.dialog(this.options.dialog).one("dialogclose",{instance:this},this._onEndShowResult),!0)},showCorrection:function(){if(this.options.showCorrection){let t=this._questions;for(let s=0,i=t.length;s<i;s++){let i=t[s],e=i.options;for(let t=0,s=e.length;t<s;t++){let s=e[t];this._showOptionStatus(i.id,s.id)}this._disableQuestionOptionsField(i.id)}return this._changeState(this.STATES.review),this.goTo(0),!0}return!1},_disableAllQuestions:function(){let t=this._questions;for(let s=0,i=t.length;s<i;s++){let i=t[s];this._disableQuestionOptionsField(i.id)}},end:function(){if(this._state===this.STATES.running){let t=this._calificate();return this.lastCalification=t,this._disableAllQuestions(),this.element.trigger(this.ON_END,[this,t]),this.showResult(t)||this.showCorrection()||(this._changeState(this.STATES.off),this._animationStop().then(this._onAnimationEndEnd)),t}return this._state==this.STATES.result?(this.showCorrection()||(this._changeState(this.STATES.off),this._animationStop().then(this._onAnimationEndEnd)),this.lastCalification):this._state==this.STATES.review?(this._changeState(this.STATES.off),this._animationStop().then(this._onAnimationEndEnd),this.lastCalification):void 0},_changeState:function(t){switch(t){case this.STATES.review:this._state=t,this.element.removeClass(`${this.options.classes.stateRunning} ${this.options.classes.stateResult}`),this.element.addClass(this.options.classes.stateReview);break;case this.STATES.running:this._state=t,this.element.removeClass(`${this.options.classes.stateReview} ${this.options.classes.stateResult}`),this.element.addClass(this.options.classes.stateRunning);break;case this.STATES.result:this._state=t,this.element.removeClass(`${this.options.classes.stateReview} ${this.options.classes.stateRunning}`),this.element.addClass(this.options.classes.stateResult);break;case this.STATES.off:this.element.removeClass(`${this.options.classes.stateResult} ${this.options.classes.stateReview} ${this.options.classes.stateRunning}`),this._state=t}},_disable:function(){this._disableStart()},_enable:function(){this._enableStart()},disable:function(){this._super(),this._disable()},enable:function(){this._super(),this._enable()},destroy:function(){this._$wrapper.removeClass(this.options.classes.wrapper),this._$header.removeClass(this.options.classes.header),this._$body.removeClass(this.options.classes.body),this._$body.show(),this._$properties.removeClass(this.options.classes.properties),this._$questionsWrapper.removeClass(this.options.classes.questions),this._$questions.removeClass(this.options.classes.question),this._$questions.show(),this._$startBtn.removeClass(`${this.options.classes.button} ${this.options.classes.startBtn}`),this._$nextBtn.removeClass(`${this.options.classes.button} ${this.options.classes.nextBtn}`),this._$prevBtn.removeClass(`${this.options.classes.button} ${this.options.classes.prevBtn}`),this._$endBtn.removeClass(`${this.options.classes.button} ${this.options.classes.endBtn}`),this._$result.removeClass(this.options.classes.result),this._$result.data("uiDialog")&&this._$result.dialog("destroy")}});
